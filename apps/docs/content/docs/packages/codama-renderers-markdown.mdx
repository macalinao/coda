---
title: "@macalinao/codama-renderers-markdown"
description: Codama visitor that renders comprehensive markdown documentation from Solana program IDLs
---

This package generates beautiful, comprehensive markdown documentation from your Solana program IDLs using the Codama AST.

## Example Output

See real documentation generated by this package:

### [Quarry Protocol Documentation](https://github.com/macalinao/coda/tree/master/clients/quarry/docs)

The Quarry staking protocol documentation showcases the comprehensive output across 6 programs:

- **[Quarry Mine](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-mine.md)** - Core staking program with 20+ instructions
- **[Quarry Merge Mine](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-merge-mine.md)** - Pool staking across multiple quarries
- **[Quarry Mint Wrapper](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-mint-wrapper.md)** - Mint wrapper for staking rewards
- **[Quarry Operator](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-operator.md)** - Delegate operator management
- **[Quarry Redeemer](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-redeemer.md)** - IOU token redemption
- **[Quarry Registry](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-registry.md)** - Rewarder registry

### [Token Metadata Documentation](https://github.com/macalinao/coda/blob/master/clients/token-metadata/docs/mpl-token-metadata.md)

Metaplex Token Metadata program documentation demonstrating complex type handling.

All this documentation is generated automatically with zero manual editing required!

## Installation

```bash
bun add -D @macalinao/codama-renderers-markdown
```

Or with npm:

```bash
npm install -D @macalinao/codama-renderers-markdown
```

## Quick Start with Coda CLI

The easiest way to use this package is through the [Coda CLI](https://coda.ianm.com), which includes built-in documentation generation:

```bash
# Install Coda CLI
bun add -D @macalinao/coda

# Generate documentation
coda docs
```

Learn more about Coda at [coda.ianm.com](https://coda.ianm.com).

## Usage

### Basic Usage

Generate markdown documentation from your IDL:

```typescript
import { renderMarkdownVisitor } from "@macalinao/codama-renderers-markdown";
import { rootNodeFromAnchor } from "@codama/nodes-from-anchor";
import { visit } from "codama";
import fs from "fs";

// Load your IDL
const idl = JSON.parse(fs.readFileSync("path/to/idl.json", "utf-8"));

// Create Codama root node
const root = rootNodeFromAnchor(idl);

// Generate markdown documentation
visit(root, renderMarkdownVisitor("./docs"));
```

### With Coda Configuration

Use it alongside TypeScript generation:

```javascript
import { defineConfig } from "@macalinao/coda";
import { renderMarkdownVisitor } from "@macalinao/codama-renderers-markdown";

export default defineConfig({
  idlPath: "./idls/my_program.json",
  outputDir: "./src/generated",
  visitors: [
    // Generate both TypeScript and documentation
    renderMarkdownVisitor("./docs/api"),
  ],
});
```

### With Custom Options

Configure the output format:

```typescript
const visitor = renderMarkdownVisitor("./docs", {
  // Format program addresses (e.g., link to explorer)
  formatAddress: (address) =>
    `[${address}](https://explorer.solana.com/address/${address})`,

  // Control table of contents generation
  renderTableOfContents: true,
});
```

## API Reference

### renderMarkdownVisitor

Creates a visitor that renders markdown documentation:

```typescript
function renderMarkdownVisitor(
  outputDir: string,
  options?: MarkdownOptions,
): Visitor;

interface MarkdownOptions {
  // Format addresses in the output
  formatAddress?: (address: string) => string;

  // Whether to render table of contents (default: true)
  renderTableOfContents?: boolean;
}
```

**Parameters:**

- `outputDir`: Directory where markdown files will be generated
- `options`: Optional configuration for formatting

## Features

### Comprehensive Coverage

Documents all aspects of your program:

- ✅ Accounts with all fields and metadata
- ✅ Instructions with accounts and arguments
- ✅ PDAs with seed definitions
- ✅ Custom types and enums
- ✅ Error codes and messages
- ✅ Program metadata and IDs

### Formatted Output

- **Tables** for structured data
- **Code blocks** for type definitions
- **Links** between related sections
- **Descriptions** from IDL documentation
- **Size calculations** for accounts
- **Discriminators** for account identification

### TypeScript-Style Types

Types are rendered in familiar TypeScript syntax:

```typescript
type TransferArgs = {
  amount: bigint;
  memo?: string;
};
```

## Integration with Coda

This renderer integrates seamlessly with Coda's `docs` command:

```bash
# Generate documentation
coda docs

# Generate TypeScript client and documentation
coda generate && coda docs
```

## Troubleshooting

### Missing Descriptions

If descriptions are missing, add them to your Anchor program:

```rust
/// Token account storing user balances
#[account]
pub struct TokenAccount {
    /// Token mint address
    pub mint: Pubkey,
    /// Account owner
    pub owner: Pubkey,
}
```

## Related Packages

- [@macalinao/coda](./coda) - Main CLI for client generation
- [@macalinao/codama-renderers-js-esm](./codama-renderers-js-esm) - TypeScript client renderer
- [@codama/nodes-from-anchor](https://github.com/codama-idl/codama) - Parse Anchor IDLs
