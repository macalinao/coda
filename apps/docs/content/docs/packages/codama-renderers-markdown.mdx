---
title: "@macalinao/codama-renderers-markdown"
description: Codama visitor that renders comprehensive markdown documentation from Solana program IDLs
---

This package generates beautiful, comprehensive markdown documentation from your Solana program IDLs using the Codama AST.

## Why Use This Package?

Documentation is critical for Solana program adoption, but manually maintaining API docs is time-consuming and error-prone. This package solves these problems by:

- **Eliminating Documentation Drift**: Your docs always match your deployed program since they're generated from the same IDL
- **Providing Complete Coverage**: Every instruction, account, type, and error is automatically documented
- **Saving Development Time**: No more manually writing and updating API documentation
- **Ensuring Consistency**: All programs in your project follow the same documentation format
- **Enabling Better Developer Experience**: Well-documented programs get more adoption

## Live Examples

See real documentation generated by this package:

### [Quarry Protocol Documentation](https://github.com/macalinao/coda/tree/master/clients/quarry/docs)

The Quarry staking protocol documentation showcases the comprehensive output across 6 programs:
- **[Quarry Mine](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-mine.md)** - Core staking program with 20+ instructions
- **[Quarry Merge Mine](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-merge-mine.md)** - Pool staking across multiple quarries
- **[Quarry Mint Wrapper](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-mint-wrapper.md)** - Mint wrapper for staking rewards
- **[Quarry Operator](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-operator.md)** - Delegate operator management
- **[Quarry Redeemer](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-redeemer.md)** - IOU token redemption
- **[Quarry Registry](https://github.com/macalinao/coda/blob/master/clients/quarry/docs/quarry-registry.md)** - Rewarder registry

### [Token Metadata Documentation](https://github.com/macalinao/coda/blob/master/clients/token-metadata/docs/mpl-token-metadata.md)

Metaplex Token Metadata program documentation demonstrating complex type handling.

All this documentation is generated automatically with zero manual editing required!

## Installation

```bash
bun add -D @macalinao/codama-renderers-markdown
```

Or with npm:
```bash
npm install -D @macalinao/codama-renderers-markdown
```

## Quick Start with Coda CLI

The easiest way to use this package is through the [Coda CLI](https://coda.ianm.com), which includes built-in documentation generation:

```bash
# Install Coda CLI
bun add -D @macalinao/coda

# Generate documentation
coda docs
```

Learn more about Coda at [coda.ianm.com](https://coda.ianm.com).

## Usage

### Basic Usage

Generate markdown documentation from your IDL:

```typescript
import { renderMarkdownVisitor } from "@macalinao/codama-renderers-markdown";
import { rootNodeFromAnchor } from "@codama/nodes-from-anchor";
import { visit } from "codama";
import fs from "fs";

// Load your IDL
const idl = JSON.parse(fs.readFileSync("path/to/idl.json", "utf-8"));

// Create Codama root node
const root = rootNodeFromAnchor(idl);

// Generate markdown documentation
visit(root, renderMarkdownVisitor("./docs"));
```

### With Coda Configuration

Use it alongside TypeScript generation:

```javascript
import { defineConfig } from "@macalinao/coda";
import { renderMarkdownVisitor } from "@macalinao/codama-renderers-markdown";

export default defineConfig({
  idlPath: "./idls/my_program.json",
  outputDir: "./src/generated",
  visitors: [
    // Generate both TypeScript and documentation
    renderMarkdownVisitor("./docs/api")
  ]
});
```

### With Custom Options

Configure the output format:

```typescript
const visitor = renderMarkdownVisitor("./docs", {
  // Format program addresses (e.g., link to explorer)
  formatAddress: (address) => 
    `[${address}](https://explorer.solana.com/address/${address})`,
  
  // Control table of contents generation
  renderTableOfContents: true,
});
```

## Generated Documentation Structure

The renderer creates a comprehensive markdown file with the following sections:

### 1. Program Overview

```markdown
# Program Name

Program description from IDL metadata

**Program ID:** `11111111111111111111111111111111`
```

### 2. Table of Contents

Automatically generated with links to all sections:

```markdown
## Table of Contents

- [Accounts](#accounts)
  - [TokenAccount](#tokenaccount)
  - [Metadata](#metadata)
- [Instructions](#instructions)
  - [Transfer](#transfer)
  - [Mint](#mint)
- [PDAs](#pdas)
  - [Authority](#authority)
- [Types](#types)
- [Errors](#errors)
```

### 3. Accounts Section

Detailed documentation for each account:

```markdown
## Accounts

### TokenAccount

Token account storing balance and owner information

| Field | Type | Description |
|-------|------|-------------|
| mint | `PublicKey` | Token mint address |
| owner | `PublicKey` | Account owner |
| amount | `u64` | Token balance |

**Size:** 165 bytes
**Discriminator:** `[1, 2, 3, 4, 5, 6, 7, 8]`
```

### 4. Instructions Section

Complete instruction documentation:

```markdown
## Instructions

### Transfer

Transfer tokens between accounts

#### Accounts

| Name | Type | Description |
|------|------|-------------|
| source | `mut` | Source token account |
| destination | `mut` | Destination token account |
| authority | `signer` | Transfer authority |

#### Arguments

| Name | Type | Description |
|------|------|-------------|
| amount | `u64` | Amount to transfer |
```

### 5. PDAs Section

Program-derived address documentation:

```markdown
## PDAs

### Authority

Derives the program authority address

**Seeds:**
- `"authority"` (constant)
- `user` (PublicKey)
- `mint` (PublicKey)
```

### 6. Types Section

Custom type definitions:

```markdown
## Types

### TokenMetadata

```typescript
type TokenMetadata = {
  name: string;
  symbol: string;
  uri: string;
  decimals: u8;
}
```

### 7. Errors Section

Program error codes:

```markdown
## Errors

| Code | Name | Message |
|------|------|---------|
| 6000 | InvalidAmount | The provided amount is invalid |
| 6001 | Unauthorized | Unauthorized access attempt |
```

## API Reference

### renderMarkdownVisitor

Creates a visitor that renders markdown documentation:

```typescript
function renderMarkdownVisitor(
  outputDir: string,
  options?: MarkdownOptions
): Visitor;

interface MarkdownOptions {
  // Format addresses in the output
  formatAddress?: (address: string) => string;
  
  // Whether to render table of contents (default: true)
  renderTableOfContents?: boolean;
}
```

**Parameters:**
- `outputDir`: Directory where markdown files will be generated
- `options`: Optional configuration for formatting

## Features

### Comprehensive Coverage

Documents all aspects of your program:
- ✅ Accounts with all fields and metadata
- ✅ Instructions with accounts and arguments
- ✅ PDAs with seed definitions
- ✅ Custom types and enums
- ✅ Error codes and messages
- ✅ Program metadata and IDs

### Formatted Output

- **Tables** for structured data
- **Code blocks** for type definitions
- **Links** between related sections
- **Descriptions** from IDL documentation
- **Size calculations** for accounts
- **Discriminators** for account identification

### TypeScript-Style Types

Types are rendered in familiar TypeScript syntax:

```typescript
type TransferArgs = {
  amount: bigint;
  memo?: string;
}
```

## Use Cases

### Documentation Sites

Generate API documentation for your documentation site:

```bash
# Generate docs
coda docs

# Use with MkDocs, Docusaurus, etc.
cp ./docs/*.md ./website/docs/
```

### GitHub README

Include generated documentation in your repository:

```javascript
// In your build script
visit(root, renderMarkdownVisitor("./"));
// Creates README.md with full API docs
```

### Multiple Programs

Document multiple programs in one project:

```javascript
// For each program
programs.forEach(program => {
  const root = rootNodeFromAnchor(program.idl);
  visit(root, renderMarkdownVisitor(
    `./docs/${program.name}`
  ));
});
```

## Best Practices

1. **Keep IDL Descriptions Updated**: Add descriptions to your Anchor program for better docs
2. **Use Semantic Names**: Clear naming improves generated documentation
3. **Version Your Docs**: Generate docs for each program version
4. **Link to Examples**: Add links to usage examples in your custom sections

## Example Output

Here's a snippet of generated documentation:

```markdown
# Token Program

A standard SPL token program implementation

**Program ID:** `TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA`

## Instructions

### Transfer

Transfers tokens from one account to another

#### Accounts

| Name | Type | Description |
|------|------|-------------|
| source | `mut` | Source token account |
| destination | `mut` | Destination token account |
| authority | `signer` | Account owner or delegate |

#### Arguments

| Name | Type | Description |
|------|------|-------------|
| amount | `u64` | Number of tokens to transfer |

---
```

## Integration with Coda

This renderer integrates seamlessly with Coda's `docs` command:

```bash
# Generate documentation
coda docs

# Generate TypeScript client and documentation
coda generate && coda docs
```

## Troubleshooting

### Missing Descriptions

If descriptions are missing, add them to your Anchor program:

```rust
/// Token account storing user balances
#[account]
pub struct TokenAccount {
    /// Token mint address
    pub mint: Pubkey,
    /// Account owner
    pub owner: Pubkey,
}
```

### Large Output Files

For very large programs, consider splitting documentation:

```typescript
// Split by component type
visit(root, renderMarkdownVisitor("./docs/accounts", {
  components: ["accounts"]
}));
visit(root, renderMarkdownVisitor("./docs/instructions", {
  components: ["instructions"]
}));
```

## Related Packages

- [@macalinao/coda](./coda) - Main CLI for client generation
- [@macalinao/codama-renderers-js-esm](./codama-renderers-js-esm) - TypeScript client renderer
- [@codama/nodes-from-anchor](https://github.com/codama-idl/codama) - Parse Anchor IDLs