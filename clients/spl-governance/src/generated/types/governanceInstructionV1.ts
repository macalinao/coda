/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import type {
  Codec,
  Decoder,
  Encoder,
  GetDiscriminatedUnionVariant,
  GetDiscriminatedUnionVariantContent,
} from "@solana/kit";
import type { RealmConfigParamsV1, RealmConfigParamsV1Args } from "./index.js";
import {
  addDecoderSizePrefix,
  addEncoderSizePrefix,
  combineCodec,
  getDiscriminatedUnionDecoder,
  getDiscriminatedUnionEncoder,
  getStructDecoder,
  getStructEncoder,
  getU32Decoder,
  getU32Encoder,
  getU64Decoder,
  getU64Encoder,
  getUtf8Decoder,
  getUtf8Encoder,
} from "@solana/kit";
import {
  getRealmConfigParamsV1Decoder,
  getRealmConfigParamsV1Encoder,
} from "./index.js";

export type GovernanceInstructionV1 =
  | { __kind: "CreateRealm"; name: string; configArgs: RealmConfigParamsV1 }
  | { __kind: "DepositGoverningTokens"; amount: bigint };

export type GovernanceInstructionV1Args =
  | { __kind: "CreateRealm"; name: string; configArgs: RealmConfigParamsV1Args }
  | { __kind: "DepositGoverningTokens"; amount: number | bigint };

export function getGovernanceInstructionV1Encoder(): Encoder<GovernanceInstructionV1Args> {
  return getDiscriminatedUnionEncoder([
    [
      "CreateRealm",
      getStructEncoder([
        ["name", addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())],
        ["configArgs", getRealmConfigParamsV1Encoder()],
      ]),
    ],
    ["DepositGoverningTokens", getStructEncoder([["amount", getU64Encoder()]])],
  ]);
}

export function getGovernanceInstructionV1Decoder(): Decoder<GovernanceInstructionV1> {
  return getDiscriminatedUnionDecoder([
    [
      "CreateRealm",
      getStructDecoder([
        ["name", addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())],
        ["configArgs", getRealmConfigParamsV1Decoder()],
      ]),
    ],
    ["DepositGoverningTokens", getStructDecoder([["amount", getU64Decoder()]])],
  ]);
}

export function getGovernanceInstructionV1Codec(): Codec<
  GovernanceInstructionV1Args,
  GovernanceInstructionV1
> {
  return combineCodec(
    getGovernanceInstructionV1Encoder(),
    getGovernanceInstructionV1Decoder(),
  );
}

// Data Enum Helpers.
export function governanceInstructionV1(
  kind: "CreateRealm",
  data: GetDiscriminatedUnionVariantContent<
    GovernanceInstructionV1Args,
    "__kind",
    "CreateRealm"
  >,
): GetDiscriminatedUnionVariant<
  GovernanceInstructionV1Args,
  "__kind",
  "CreateRealm"
>;
export function governanceInstructionV1(
  kind: "DepositGoverningTokens",
  data: GetDiscriminatedUnionVariantContent<
    GovernanceInstructionV1Args,
    "__kind",
    "DepositGoverningTokens"
  >,
): GetDiscriminatedUnionVariant<
  GovernanceInstructionV1Args,
  "__kind",
  "DepositGoverningTokens"
>;
export function governanceInstructionV1<
  K extends GovernanceInstructionV1Args["__kind"],
  Data,
>(kind: K, data?: Data) {
  return Array.isArray(data)
    ? { __kind: kind, fields: data }
    : { __kind: kind, ...(data ?? {}) };
}

export function isGovernanceInstructionV1<
  K extends GovernanceInstructionV1["__kind"],
>(
  kind: K,
  value: GovernanceInstructionV1,
): value is GovernanceInstructionV1 & { __kind: K } {
  return value.__kind === kind;
}
